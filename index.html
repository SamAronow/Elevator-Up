<!DOCTYPE html>
<html>
<head>
  <title>Elevator Up - Room Select</title>
  <style>
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Multiplayer Game</h1>
  <button onclick="createRoom()">Create Room</button>
  <button onclick="joinRoom()">Join Room</button>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="database.js"></script>
  <script>
    function randomCode(length = 4) {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      return Array.from({ length }, () => chars[Math.floor(Math.random() * chars.length)]).join('');
    }

    async function createRoom() {
      const code = randomCode();
      await Promise.all([
        write(`/${code}/Player1/Used`, false),
        write(`/${code}/Player2/Used`, false),
        write(`/${code}/initialized`, false)
      ]);
      window.location.href = `room.html?room=${code}`;
    }

    function joinRoom() {
      const input = prompt("Enter room code:");
      if (!input) return;
      const code = input.toUpperCase();
      read(`/${code}/initialized`).then(exists => {
        if (exists !== null) {
          window.location.href = `room.html?room=${code}`;
        } else {
          alert("Room not found!");
        }
      });
    }
  </script>
</body>
</html>
